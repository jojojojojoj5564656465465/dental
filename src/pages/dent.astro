---
import Layout from '../layouts/Layout.astro'
import DentistCard from 'src/components/Dentist-Card/index.tsx'
import { container, containerGridMaxColumn } from '@recipe'

// Définition de l'interface pour un objet dentiste
interface Dentist {
  id: string
  name: string
  specialty: string
  description: string
  imageUrl: string
  appointmentLink: string
  buttonText?: string
}

// Données des dentistes - tu peux les externaliser dans un fichier JSON ou CMS
const dentists: Dentist[] = [
  {
    id: 'marie-martin',
    name: 'Marie Martin',
    specialty: 'Orthodontiste Spécialisée',
    description:
      "Experte en aligneurs invisibles, orthodontie linguale et pédodontie. Plus de 15 ans d'expérience dans le sourire parfait.",
    imageUrl: '/src/assets/dr-marie-martin.jpg',
    appointmentLink: '/contact?dentist=marie-martin',
    buttonText: '✨ Consultation gratuite',
  },
  {
    id: 'jean-dupont',
    name: 'Jean Dupont',
    specialty: 'Chirurgien-Dentiste',
    description:
      'Spécialisé en implantologie, chirurgie orale et soins conservateurs. Techniques innovantes et sans douleur.',
    imageUrl: '/src/assets/dr-jean-dupont.jpg',
    appointmentLink: '/contact?dentist=jean-dupont',
    buttonText: '🦷 Réserver un créneau',
  },
  {
    id: 'sophie-bernard',
    name: 'Sophie Bernard',
    specialty: 'Parodontiste',
    description:
      'Experte en santé des gencives, traitements parodontaux et esthétique dentaire. Approche douce et personnalisée.',
    imageUrl: '/src/assets/dr-sophie-bernard.jpg',
    appointmentLink: '/contact?dentist=sophie-bernard',
    buttonText: '💎 Prendre rendez-vous',
  },
  {
    id: 'pierre-martin',
    name: 'Pierre Martin',
    specialty: 'Endodontiste',
    description:
      'Spécialiste des traitements de canal et de la préservation dentaire. Technologies de pointe pour votre confort.',
    imageUrl: '/src/assets/dr-pierre-martin.jpg',
    appointmentLink: '/contact?dentist=pierre-martin',
    buttonText: '🔬 Consultation',
  },
  {
    id: 'claire-dubois',
    name: 'Claire Dubois',
    specialty: 'Dentiste Esthétique',
    description:
      "Passionnée par l'esthétique dentaire : facettes, blanchiment, smile design. Révélez votre plus beau sourire.",
    imageUrl: '/src/assets/dr-claire-dubois.jpg',
    appointmentLink: '/contact?dentist=claire-dubois',
    buttonText: '✨ Transformation',
  },
  {
    id: 'thomas-leroy',
    name: 'Thomas Leroy',
    specialty: 'Dentiste Généraliste',
    description:
      'Soins dentaires complets pour toute la famille. Prévention, soins et urgences avec une approche bienveillante.',
    imageUrl: '/src/assets/dr-thomas-leroy.jpg',
    appointmentLink: '/contact?dentist=thomas-leroy',
    buttonText: '👨‍👩‍👧‍👦 Rendez-vous famille',
  },
]

// Métadonnées pour SEO
const pageTitle = 'Notre Équipe de Dentistes Experts'
const pageDescription =
  'Découvrez notre équipe de dentistes spécialisés : orthodontie, implantologie, esthétique dentaire. Prenez rendez-vous en ligne.'
---

<Layout title={pageTitle} description={pageDescription}>
  <!-- Section Hero -->
  <section
    class={container({
      theme: "darkBlueBanner",
      background: true,
      size: "large",
    })}
  >
    <div class="container mx-auto px-4 text-center">
      <h1
        class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-6"
      >
        Notre Équipe d'Experts
      </h1>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-8">
        Découvrez nos dentistes spécialisés, chacun expert dans son domaine. Des
        soins de qualité avec les dernières technologies pour votre sourire
        parfait.
      </p>
      <div class="flex flex-wrap justify-center gap-4 mb-12">
        <span
          class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-semibold"
        >
          🦷 Soins sans douleur
        </span>
        <span
          class="bg-purple-100 text-purple-800 px-4 py-2 rounded-full text-sm font-semibold"
        >
          ⭐ Technologies avancées
        </span>
        <span
          class="bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm font-semibold"
        >
          📅 Rendez-vous flexibles
        </span>
      </div>
    </div>
  </section>

  <!-- Grille des dentistes -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4">
      <!-- Grid responsive optimisé : 3-4 cards par ligne max, largeur 400px max -->
      <div
        class={containerGridMaxColumn({
          size: "medium",
          maxColumn: 4,
          background: true,
          gap: "sm",
        })}
      >
        {
          dentists.map((dentist) => (
            <div class="w-full max-w-[400px]">
              <DentistCard
                name={dentist.name}
                specialty={dentist.specialty}
                description={dentist.description}
                imageUrl={dentist.imageUrl}
                appointmentLink={dentist.appointmentLink}
                buttonText={dentist.buttonText}
                client:load
              />
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- Section Call-to-Action -->
  <section
    class="bg-gradient-to-r from-blue-600 to-purple-600 py-16 text-white"
  >
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-3xl md:text-4xl font-bold mb-6">
        Prêt à retrouver votre plus beau sourire ?
      </h2>
      <p class="text-xl mb-8 opacity-90 max-w-2xl mx-auto">
        Nos experts vous accompagnent avec des soins personnalisés et les
        dernières innovations technologiques.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a
          href="/contact"
          class="bg-white text-blue-600 font-bold py-4 px-8 rounded-full hover:bg-gray-50 transition-all duration-300 transform hover:scale-105 shadow-lg"
        >
          📞 Nous contacter
        </a>
        <a
          href="/services"
          class="border-2 border-white text-white font-bold py-4 px-8 rounded-full hover:bg-white hover:text-blue-600 transition-all duration-300 transform hover:scale-105"
        >
          🔍 Nos services
        </a>
      </div>
    </div>
  </section>

  <!-- Section informations pratiques -->
  <section class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
        <div
          class="text-center p-6 rounded-2xl bg-gradient-to-br from-blue-50 to-blue-100"
        >
          <div class="text-4xl mb-4">⏰</div>
          <h3 class="font-bold text-lg mb-2">Horaires étendus</h3>
          <p class="text-gray-600">Lun-Ven: 8h-20h<br />Sam: 9h-17h</p>
        </div>

        <div
          class="text-center p-6 rounded-2xl bg-gradient-to-br from-green-50 to-green-100"
        >
          <div class="text-4xl mb-4">🚀</div>
          <h3 class="font-bold text-lg mb-2">Urgences</h3>
          <p class="text-gray-600">Service d'urgence<br />7j/7 - 24h/24</p>
        </div>

        <div
          class="text-center p-6 rounded-2xl bg-gradient-to-br from-purple-50 to-purple-100"
        >
          <div class="text-4xl mb-4">💳</div>
          <h3 class="font-bold text-lg mb-2">Facilités de paiement</h3>
          <p class="text-gray-600">
            Paiement en plusieurs fois<br />Mutuelle acceptée
          </p>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Animations personnalisées pour la page */
  .container {
    animation: fadeInUp 0.6s ease-out;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Optimisation responsive pour la grille */
  .grid {
    /* Mobile : 1 colonne */
    grid-template-columns: 1fr;
  }

  /* Tablette : 2 colonnes */
  @media (min-width: 640px) {
    .grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  /* Desktop : 3 colonnes minimum */
  @media (min-width: 1024px) {
    .grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  /* Large desktop : 4 colonnes maximum */
  @media (min-width: 1280px) {
    .grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  /* Très large écran : on garde 4 colonnes max */
  @media (min-width: 1536px) {
    .grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  /* Contrainte de largeur pour les cards */
  .grid > div {
    max-width: 400px;
    margin: 0 auto;
  }

  /* Responsive gap */
  @media (max-width: 640px) {
    .grid {
      gap: 1rem;
    }
  }

  @media (min-width: 641px) and (max-width: 1023px) {
    .grid {
      gap: 1.25rem;
    }
  }

  @media (min-width: 1024px) {
    .grid {
      gap: 1.5rem;
    }
  }

  /* Amélioration de l'accessibilité */
  @media (prefers-reduced-motion: reduce) {
    .container {
      animation: none;
    }

    * {
      transition: none !important;
      animation: none !important;
    }
  }
</style>

<script>
  // Script pour analytics et interactions (optionnel)
  document.addEventListener("DOMContentLoaded", () => {
    // Tracking des clics sur les cards de dentistes
    const dentistCards = document.querySelectorAll("[data-dentist-card]");
    dentistCards.forEach((card) => {
      card.addEventListener("click", (e) => {
        const dentistName = e.currentTarget.getAttribute("data-dentist-name");
        // Analytics tracking ici si nécessaire
        console.log(`Click sur la card de ${dentistName}`);
      });
    });

    // Lazy loading amélioré pour les images
    if ("IntersectionObserver" in window) {
      const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const img = entry.target;
            img.classList.add("fade-in");
          }
        });
      });

      document.querySelectorAll("img").forEach((img) => {
        imageObserver.observe(img);
      });
    }
  });
</script>
